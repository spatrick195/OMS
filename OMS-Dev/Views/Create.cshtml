@model OMS_Dev.Models.EmployeeListViewModel

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

@using (Html.BeginForm("Create", "Employee", FormMethod.Post, new { @class = "my-1" }))
{
    @Html.AntiForgeryToken()
    <div class="row">
        <p class="count">1</p>
    </div>
    <div class="users-to-register">
        <div class="userContainer row">
            <div class="form-group mx-1">
                <label for="username">Username</label>
                <input id="username" type="text" name="UsersToRegister[0].Employee.Username" class="form-control" placeholder="Username" />
            </div>
            <div class="form-group mx-1">
                <label for="role">Role</label>
                <input id="role" type="text" name="UsersToRegister[0].Employee.Role" class="form-control" placeholder="Role" />
            </div>
            <div class="form-group mx-1">
                <label for="password">Password</label>
                <input id="password" type="password" name="UsersToRegister[0].Employee.Password" class="form-control" placeholder="Password" />
            </div>
        </div>
    </div>

    <div class="row">
        <button type="button" class="btn btn-info mr-1 my-2" id="add-user-button" style="margin-top: 37.5px; width: 50px;"><i class="fas fa-plus"></i></button>
        <button type="submit" class="btn btn-info my-2">Submit</button>
        <a type="button" class="btn btn-warning my-2 ml-1" href="/Home">Back</a>
    </div>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div>
@section scripts{

    <script>
        $(function () {
            $('#add-user-button').click(function () {
                // how many users are there already
                var userCount = $('.userContainer').length + 1;

                // this count is used for the index for the next user container
                var nextIndex = userCount;
                var html =
                    '<div class="userContainer row">' +
                    '<div class="form-group mx-1">' +
                    '<label for="username">Username</label>' +
                    '<input id="username" type="text" name="UsersToRegister[' + nextIndex + '].Employee.Username"  class="form-control" placeholder="Username" />' +
                    '</div>' +
                    '<div class="form-group mx-1">' +
                    '<label for="role">Role</label>' +
                    '<input id="role" type="text" name="UsersToRegister[' + nextIndex + '].Employee.Role"  class="form-control" placeholder="Role" />' + '</div>' +
                    '<div class="form-group mx-1">' +
                    '<label for="password">Password</label>' +
                    '<input id="password" type="password" name="UsersToRegister[' + nextIndex + '].Employee.Password"  class="form-control" placeholder="Password" />' +
                    '</div>' +
                    '</div>';
                // append the html
                $('.count').text(userCount);
                $('.users-to-register').append(html);
            });
        });
    </script>
}